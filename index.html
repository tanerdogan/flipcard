
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  dir="ltr">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Checkout Form</title>
	<link rel="stylesheet" href="css/flipcard.css" type="text/css" />
	<link rel="stylesheet" href="css/style.css" type="text/css" />
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
</head>
<body>
	<form class="checkout">
		<div class="checkout-header">
			<h1 class="checkout-title">
				Please Checkout
			</h1>
		</div>
		<p>
			<input type="text" class="checkout-input checkout-name" maxlength="23" placeholder="Your name" autofocus>
			<input type="text" class="checkout-input checkout-exp-mm" maxlength="2" placeholder="MM">
			<input type="text" class="checkout-input checkout-exp-yy" maxlength="2" placeholder="YY">
		</p>
		<p>
			<input type="text" class="checkout-input checkout-card" maxlength="16" placeholder="4111 1111 1111 1111">
			<input type="text" class="checkout-input checkout-cvc" maxlength="3" placeholder="CVC">
		</p>
		<p>
			<input type="submit" value="Purchase" class="checkout-btn">
		</p>

		<div class="flip-container" ontouchstart="this.classList.toggle('hover');">
			<div class="flipper">
				<div class="front">
					<img src="images/card.jpg" alt="">
					<div class="card-name"></div>
					<div class="card-number"></div>
					<div class="card-exp"></div>
					<div class="card-img"></div>
				</div>
				<div class="back">
					<img src="images/cardback.jpg" alt="">
					<div class="card-cvc"></div>
				</div>
			</div>
		</div>

	</form>


	<script>
	$(document).ready(function(){
		$(".checkout-name").on("keyup", function(){
			$(".card-name").html(this.value);
		});

		$(".checkout-card").on("keyup", function(key){

			this.value = this.value.replace(/[^0-9\.]/g,'');

			card = $(this).val();

			visa = /^4/;
			visa_electron = /^(4026|417500|4508|4844|491(3|7))/;
			mastercard = /^5[1-5]/;
			maestro = /^(5018|5020|5038|6304|6759|676[1-3])/;
			discover = /^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/;

			if(visa.test(card)) $(".card-img").css("background-position-x", "0px");
			if(visa_electron.test(card)) $(".card-img").css("background-position-x", "-51px");
			if(mastercard.test(card)) $(".card-img").css("background-position-x", "-102px");
			if(maestro.test(card)) $(".card-img").css("background-position-x", "-153px");
			if(discover.test(card)) $(".card-img").css("background-position-x", "-204px");

			$(".card-number").html(card.match(new RegExp('.{1,4}', 'g')).join(" "));

		});

		$(".checkout-exp-mm, .checkout-exp-yy").on("keyup", function(){
			this.value = this.value.replace(/[^0-9\.]/g,'');
			$(".card-exp").html($(".checkout-exp-mm").val() +"/"+$(".checkout-exp-yy").val());
		});

		$(".checkout-cvc").on("focus", function(){
			$(".flip-container").addClass("hover");
		}).on("focusout", function(){
			$(".flip-container").removeClass("hover");
		});

		$(".checkout-cvc").on("keyup", function(){
			this.value = this.value.replace(/[^0-9\.]/g,'');
			$(".card-cvc").html(this.value);
		});
	});
</script>

</body>
</html>